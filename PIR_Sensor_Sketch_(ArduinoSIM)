// C++ 

#include <ArduinoJson.h>

int ledPin = 13;                 
int pirPin = 2;                 
int pirStat = 0;  

void setup()
{
    pinMode(ledPin, OUTPUT);     
  	pinMode(pirPin, INPUT);     

  	Serial.begin(9600);
}

void loop()
{
  pirStat = digitalRead(pirPin); 
   
  if (pirStat == HIGH) {            
    digitalWrite(ledPin, HIGH);  
    
    DynamicJsonDocument doc(1024);
      
    doc["sensor"] = "F4:A5:74:89:16:57";
    doc["detected"] = true;
    
    serializeJson(doc, Serial);
	delay(2000);				// delay before sending a new message
  } 
  else {
    digitalWrite(ledPin, LOW); 
    DynamicJsonDocument doc(1024);
   	
    doc["sensor"] = "F4:A5:74:89:16:57";
    doc["detected"] = false;
    
    serializeJson(doc, Serial);
	delay(2000);	
    
  }
}
